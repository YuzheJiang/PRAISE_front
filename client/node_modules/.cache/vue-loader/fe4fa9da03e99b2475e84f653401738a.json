{"remainingRequest":"/Users/reshika/cs20/Research_Assistant/HSBC/New_layout/PRAISE_front/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/reshika/cs20/Research_Assistant/HSBC/New_layout/PRAISE_front/client/src/components/mappyview.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/reshika/cs20/Research_Assistant/HSBC/New_layout/PRAISE_front/client/src/components/mappyview.vue","mtime":1596282701025},{"path":"/Users/reshika/cs20/Research_Assistant/HSBC/New_layout/PRAISE_front/client/node_modules/cache-loader/dist/cjs.js","mtime":1594193191162},{"path":"/Users/reshika/cs20/Research_Assistant/HSBC/New_layout/PRAISE_front/client/node_modules/babel-loader/lib/index.js","mtime":1594193189891},{"path":"/Users/reshika/cs20/Research_Assistant/HSBC/New_layout/PRAISE_front/client/node_modules/cache-loader/dist/cjs.js","mtime":1594193191162},{"path":"/Users/reshika/cs20/Research_Assistant/HSBC/New_layout/PRAISE_front/client/node_modules/vue-loader/lib/index.js","mtime":1594193201324}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJzsKaW1wb3J0ICdsZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3MnOwppbXBvcnQgTCBmcm9tICdsZWFmbGV0JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IEV2ZW50QnVzIGZyb20gJ0AvZXZlbnRCdXMnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdtYXBweXZpZXcnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb2xvckRhdGE6IFt7IG9mZnNldDogJzAlJywgY29sb3I6ICcjZjNlNzliJyB9LCB7IG9mZnNldDogJzE4LjI4JScsIGNvbG9yOiAnI2ZhYzQ4NCcgfSwKICAgICAgICB7IG9mZnNldDogJzI4LjU2JScsIGNvbG9yOiAnI2Y4YTA3ZScgfSwgeyBvZmZzZXQ6ICc0Mi44NCUnLCBjb2xvcjogJyNlYjdmODYnIH0sCiAgICAgICAgeyBvZmZzZXQ6ICc1Ny4xMiUnLCBjb2xvcjogJyNjZTY2OTMnIH0sIHsgb2Zmc2V0OiAnNzEuNCUnLCBjb2xvcjogJyNhMDU5YTAnIH0sCiAgICAgICAgeyBvZmZzZXQ6ICcxMDAlJywgY29sb3I6ICcjNWM1M2E1JyB9XSwKICAgICAgZXh0ZW50OiBbMCwgODBdLAogICAgICBhcnJheTogWzEyLCAxMSwgMTAsIDksIDgsIDcsIDYsIDUsIDQsIDMsIDIsIDEsIDBdLAogICAgICBpbmRleDogMTIsCiAgICAgIE1ldGhvZDE6ICdDTUFRJywKICAgICAgTWV0aG9kMjogJ091cl9NZXRob2QnLAogICAgICBvYlN0YXRpb246IG51bGwsCiAgICAgIG1hcDE6IG51bGwsCiAgICAgIG1hcDI6IG51bGwsCiAgICAgIGZsYWc6IGZhbHNlLAogICAgICBwb2x5Z29uX2RhdGE6IFtdLAogICAgICBnZW9kYXRhOiBudWxsLAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBkYXRlKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB0aGlzLm9sZERhdGUgPSBvbGRWYWx1ZTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0TWFwKCkgewogICAgICB0aGlzLm1hcDEgPSBMLm1hcCgnbWFwXzEnKS5zZXRWaWV3KFsyMi4zNDM4NSwgMTE0LjEyODldLCAxMCk7CiAgICAgIHRoaXMubWFwMiA9IEwubWFwKCdtYXBfMicpLnNldFZpZXcoWzIyLjM0Mzg1LCAxMTQuMTI4OV0sIDEwKTsKICAgICAgTC50aWxlTGF5ZXIoJ2h0dHBzOi8vY2FydG9kYi1iYXNlbWFwcy17c30uZ2xvYmFsLnNzbC5mYXN0bHkubmV0L3Jhc3RlcnRpbGVzL3ZveWFnZXIve3p9L3t4fS97eX0ucG5nJywKICAgICAgICB7IGF0dHJpYnV0aW9uOiAnJmNvcHk7IDxhIGhyZWY9Imh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0Ij5PcGVuU3RyZWV0TWFwPC9hPiwgJmNvcHk7IDxhIGhyZWY9Imh0dHBzOi8vY2FydG8uY29tL2F0dHJpYnV0aW9uIj5DQVJUTzwvYT4nIH0pLmFkZFRvKHRoaXMubWFwMSk7CiAgICAgIEwudGlsZUxheWVyKCdodHRwczovL2NhcnRvZGItYmFzZW1hcHMte3N9Lmdsb2JhbC5zc2wuZmFzdGx5Lm5ldC9yYXN0ZXJ0aWxlcy92b3lhZ2VyL3t6fS97eH0ve3l9LnBuZycsCiAgICAgICAgeyBhdHRyaWJ1dGlvbjogJyZjb3B5OyA8YSBocmVmPSJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodCI+T3BlblN0cmVldE1hcDwvYT4sICZjb3B5OyA8YSBocmVmPSJodHRwczovL2NhcnRvLmNvbS9hdHRyaWJ1dGlvbiI+Q0FSVE88L2E+JyB9KS5hZGRUbyh0aGlzLm1hcDIpOwogICAgfSwKICAgIGRyYXdHcmlkcyhkYXRhLCBociwgbWFwKSB7CiAgICAgIGlmIChtYXAgPT09ICdDTUFRJykgewogICAgICAgIHRoaXMubWFwcHkgPSB0aGlzLm1hcDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tYXBweSA9IHRoaXMubWFwMjsKICAgICAgfQogICAgICB0aGlzLmNsZWFyTGF5ZXIoKTsKICAgICAgbGV0IHBvbHlnb247CiAgICAgIGNvbnN0IGNvbG9ycyA9IGQzLnNjYWxlUXVhbnRpemUoKQogICAgICAgIC5kb21haW4odGhpcy5leHRlbnQpCiAgICAgICAgLnJhbmdlKHRoaXMuY29sb3JEYXRhLm1hcCgoZCkgPT4gZC5jb2xvcikpOwogICAgICB0aGlzLmdlb2RhdGEgPSBkYXRhOwogICAgICB0aGlzLmdlb2RhdGEuZm9yRWFjaCgobCkgPT4gewogICAgICAgIGNvbnN0IGxheWVyID0gbFtocl07CiAgICAgICAgY29uc3QgdmFsID0gbGF5ZXIucG9sbHV0YW50LnRvRml4ZWQoMik7CiAgICAgICAgY29uc3Qgb2JzVmFsID0gbGF5ZXIuT2JzX2NvbjsKICAgICAgICBpZiAobGF5ZXIuZGF0YSA9PT0gJ09ic2VydmF0b3J5X2RhdGEnKSB7CiAgICAgICAgICBwb2x5Z29uID0gTC5wb2x5Z29uKGxheWVyLmNvb3JkLCB7CiAgICAgICAgICAgIGZpbGxDb2xvcjogJ3JlZCcsIHdlaWdodDogMCwgb3BhY2l0eTogMCwgZmlsbE9wYWNpdHk6IDAuNSwKICAgICAgICAgIH0pLmJpbmRUb29sdGlwKGAke21hcH06ICR7dmFsLnRvU3RyaW5nKCl9XG4gT2JzOiAke29ic1ZhbC50b1N0cmluZygpfWApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwb2x5Z29uID0gTC5wb2x5Z29uKGxheWVyLmNvb3JkLCB7CiAgICAgICAgICAgIGZpbGxDb2xvcjogY29sb3JzKGxheWVyLnBvbGx1dGFudCksIHdlaWdodDogMCwgb3BhY2l0eTogMCwgZmlsbE9wYWNpdHk6IDAuNSwKICAgICAgICAgIH0pLmJpbmRUb29sdGlwKGAke21hcH06ICR7dmFsLnRvU3RyaW5nKCl9YCk7CiAgICAgICAgfQogICAgICAgIHBvbHlnb24uYWRkVG8odGhpcy5tYXBweSk7CiAgICAgICAgdGhpcy5wb2x5Z29uX2RhdGEucHVzaChwb2x5Z29uKTsKICAgICAgfSk7CiAgICB9LAogICAgZHJhd0xlZ2VuZChkaXZJRCkgewogICAgICBjb25zdCB4U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpCiAgICAgICAgLnJhbmdlKFswLCAxODAgLSAoOSAqIDIpXSkKICAgICAgICAuZG9tYWluKHRoaXMuZXh0ZW50KTsKICAgICAgY29uc3QgeEF4aXMgPSBkMy5heGlzQm90dG9tKHhTY2FsZSkKICAgICAgICAudGlja1NpemUoOCAqIDIpCiAgICAgICAgLnRpY2tWYWx1ZXModGhpcy5leHRlbnQpOwogICAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QoZGl2SUQpCiAgICAgICAgLmFwcGVuZCgnc3ZnJykKICAgICAgICAuYXR0cignd2lkdGgnLCAxODApCiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDM1KTsKICAgICAgY29uc3QgZyA9IHN2Zy5hcHBlbmQoJ2cnKS5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDMsIDUpJyk7CiAgICAgIGNvbnN0IGRlZnMgPSBzdmcuYXBwZW5kKCdkZWZzJyk7CiAgICAgIGNvbnN0IGxpbmVhckdyYWRpZW50ID0gZGVmcy5hcHBlbmQoJ2xpbmVhckdyYWRpZW50JykuYXR0cignaWQnLCAnbXlHcmFkaWVudCcpOwogICAgICBsaW5lYXJHcmFkaWVudC5zZWxlY3RBbGwoJ3N0b3AnKQogICAgICAgIC5kYXRhKHRoaXMuY29sb3JEYXRhKQogICAgICAgIC5lbnRlcigpLmFwcGVuZCgnc3RvcCcpCiAgICAgICAgLmF0dHIoJ29mZnNldCcsIChkKSA9PiBkLm9mZnNldCkKICAgICAgICAuYXR0cignc3RvcC1jb2xvcicsIChkKSA9PiBkLmNvbG9yKTsKICAgICAgZy5hcHBlbmQoJ3JlY3QnKQogICAgICAgIC5hdHRyKCd3aWR0aCcsIDE4MCAtICg5ICogMikpCiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDgpCiAgICAgICAgLnN0eWxlKCdmaWxsJywgJ3VybCgjbXlHcmFkaWVudCknKTsKICAgICAgZy5hcHBlbmQoJ2cnKQogICAgICAgIC5jYWxsKHhBeGlzKTsKICAgIH0sCiAgICBjbGVhckxheWVyKCkgewogICAgICB0aGlzLnBvbHlnb25fZGF0YS5mb3JFYWNoKChsYXllcikgPT4gewogICAgICAgIHRoaXMubWFwMS5yZW1vdmVMYXllcihsYXllcik7CiAgICAgIH0pOwogICAgfSwKICAgIGNoZWNrQ29uZGl0aW9uKHBvbCwgaHIsIG5ELCBvRCwgbWFwKSB7CiAgICAgIHRoaXMuY2hhbmdlTmFtZShwb2wsIGhyKTsKICAgICAgaWYgKG9EID09PSBuRCkgewogICAgICAgIHRoaXMuZHJhd0dyaWRzKHRoaXMuZ2VvZGF0YSwgaHIsIG1hcCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5nZXRkYXRhKHBvbCwgaHIsIG5EKTsKICAgICAgfQogICAgfSwKICAgIGdldGRhdGEocG9sLCBociwgbkQsIG1ldGhvZCkgewogICAgICBjb25zdCBwYXRoID0gJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9kYXRhJzsKICAgICAgYXhpb3MucG9zdChwYXRoLCB7CiAgICAgICAgTWV0aG9kOiBtZXRob2QsCiAgICAgICAgcG9sbHV0YW50czogcG9sLAogICAgICAgIERhdGU6IG5ELAogICAgICAgIEZ1dHVyZV9ob3VyOiBociwKICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAobWV0aG9kID09PSAnQ01BUScpIHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICB0aGlzLmRyYXdHcmlkcyhyZXMuZGF0YSwgaHIsIHRoaXMuTWV0aG9kMSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmRyYXdHcmlkcyhyZXMuZGF0YSwgaHIsIHRoaXMuTWV0aG9kMik7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBkb0FuaW1hdGlvbihqLCBwb2wsIG5ELCBvRCkgewogICAgICBsZXQgeCA9IGo7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmICh0aGlzLmZsYWcgPT09IHRydWUpIHsKICAgICAgICAgIGNvbnN0IGhvdXIgPSB0aGlzLmFycmF5W3hdOwogICAgICAgICAgdGhpcy5jaGVja0NvbmRpdGlvbihwb2wsIGhvdXIsIG5ELCBvRCk7CiAgICAgICAgICB4IC09IDE7CiAgICAgICAgICBpZiAoeCA+PSAwKSB7CiAgICAgICAgICAgIHRoaXMuaW5kZXggPSB4OwogICAgICAgICAgICB0aGlzLmRvQW5pbWF0aW9uKHgsIHBvbCwgbkQsIG9EKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIDEwMDApOwogICAgfSwKICAgIGNoYW5nZU5hbWUocG9sLCBocikgewogICAgICBjb25zdCBsZWdOYW1lID0gcG9sOwogICAgICBjb25zdCBmaE5hbWUgPSAnRnV0dXJlX2hvdXI6JzsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZ2VuZF9uYW1lJykuaW5uZXJIVE1MID0gbGVnTmFtZS5jb25jYXQoJyAgQ29uY2VudHJhdGlvbicpOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRnV0dXJlX2hvdXInKS5pbm5lckhUTUwgPSBmaE5hbWUuY29uY2F0KGhyKTsKICAgIH0sCiAgICBzdWJtaXRGdW5jKHBvbCwgaHIsIG5ELCBvRCwgbWFwKSB7CiAgICAgIGlmICh0aGlzLmluZGV4ID09PSAwKSB7CiAgICAgICAgdGhpcy5pbmRleCA9IDEyOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLmFycmF5LmluZGV4T2YocGFyc2VJbnQoaHIsIDEwKSk7CiAgICAgIH0KICAgICAgdGhpcy5jaGVja0NvbmRpdGlvbihwb2wsIGhyLCBuRCwgb0QsIG1hcCk7CiAgICB9LAogICAgcGxheUZ1bmMocG9sLCBuRCwgb0QpIHsKICAgICAgdGhpcy5mbGFnID0gdHJ1ZTsKICAgICAgdGhpcy5kb0FuaW1hdGlvbih0aGlzLmluZGV4LCBwb2wsIG5ELCBvRCk7CiAgICB9LAogICAgc3RvcEZ1bmMoKSB7CiAgICAgIHRoaXMuZmxhZyA9IGZhbHNlOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRNYXAoKTsKICAgIHRoaXMuZHJhd0xlZ2VuZCgnI2xlZ2VuZCcpOwogICAgRXZlbnRCdXMuJG9uKCdjbGlja2VkLWV2ZW50JywgKHBvbGx1dGFudCwgaG91ciwgbmV3RGF0ZSwgb2xkRGF0ZSkgPT4gewogICAgICBpZiAodGhpcy5nZW9kYXRhID09PSBudWxsKSB7CiAgICAgICAgdGhpcy5jaGFuZ2VOYW1lKHBvbGx1dGFudCwgaG91cik7CiAgICAgICAgdGhpcy5nZXRkYXRhKHBvbGx1dGFudCwgaG91ciwgbmV3RGF0ZSwgdGhpcy5NZXRob2QxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnN1Ym1pdEZ1bmMocG9sbHV0YW50LCBob3VyLCBuZXdEYXRlLCBvbGREYXRlLCB0aGlzLk1ldGhvZDEpOwogICAgICB9CiAgICB9KTsKICAgIEV2ZW50QnVzLiRvbigncGxheS1ldmVudCcsIChwb2xsdXRhbnQsIG5ld0RhdGUsIG9sZERhdGUpID0+IHsKICAgICAgdGhpcy5wbGF5RnVuYyhwb2xsdXRhbnQsIG5ld0RhdGUsIG9sZERhdGUpOwogICAgfSk7CiAgICBFdmVudEJ1cy4kb24oJ3N0b3AtZXZlbnQnLCAoKSA9PiB7CiAgICAgIHRoaXMuc3RvcEZ1bmMoKTsKICAgIH0pOwogIH0sCn07Cg=="},{"version":3,"sources":["mappyview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mappyview.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"row\">\n      <div class=\"col-12\">\n         <div class=\"row\">\n           <div class=\"col-md-3 first_map\">\n            <h6 id=\"Future_hour\">Future hour:</h6>\n          </div>\n          <div class=\"col-md-5 first_map\">\n            <h4 id='heading_1'>CMAQ Result</h4>\n          </div>\n          <div class=\"col-md-4 first_map\">\n            <p id=\"legend_name\">PM10</p>\n            <div class = 'legend' id='legend'></div>\n          </div>\n        </div>\n        <div class='map' id='map_1'></div>\n      </div>\n      <hr>\n      <div class=\"col-12\">\n         <h4 id='heading_2'>Our Method Result</h4>\n         <div class='map' id='map_2'></div>\n      </div>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport axios from 'axios';\nimport EventBus from '@/eventBus';\n\nexport default {\n  name: 'mappyview',\n  data() {\n    return {\n      colorData: [{ offset: '0%', color: '#f3e79b' }, { offset: '18.28%', color: '#fac484' },\n        { offset: '28.56%', color: '#f8a07e' }, { offset: '42.84%', color: '#eb7f86' },\n        { offset: '57.12%', color: '#ce6693' }, { offset: '71.4%', color: '#a059a0' },\n        { offset: '100%', color: '#5c53a5' }],\n      extent: [0, 80],\n      array: [12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0],\n      index: 12,\n      Method1: 'CMAQ',\n      Method2: 'Our_Method',\n      obStation: null,\n      map1: null,\n      map2: null,\n      flag: false,\n      polygon_data: [],\n      geodata: null,\n    };\n  },\n  watch: {\n    date(newValue, oldValue) {\n      this.oldDate = oldValue;\n    },\n  },\n  methods: {\n    initMap() {\n      this.map1 = L.map('map_1').setView([22.34385, 114.1289], 10);\n      this.map2 = L.map('map_2').setView([22.34385, 114.1289], 10);\n      L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager/{z}/{x}/{y}.png',\n        { attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attribution\">CARTO</a>' }).addTo(this.map1);\n      L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager/{z}/{x}/{y}.png',\n        { attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attribution\">CARTO</a>' }).addTo(this.map2);\n    },\n    drawGrids(data, hr, map) {\n      if (map === 'CMAQ') {\n        this.mappy = this.map1;\n      } else {\n        this.mappy = this.map2;\n      }\n      this.clearLayer();\n      let polygon;\n      const colors = d3.scaleQuantize()\n        .domain(this.extent)\n        .range(this.colorData.map((d) => d.color));\n      this.geodata = data;\n      this.geodata.forEach((l) => {\n        const layer = l[hr];\n        const val = layer.pollutant.toFixed(2);\n        const obsVal = layer.Obs_con;\n        if (layer.data === 'Observatory_data') {\n          polygon = L.polygon(layer.coord, {\n            fillColor: 'red', weight: 0, opacity: 0, fillOpacity: 0.5,\n          }).bindTooltip(`${map}: ${val.toString()}\\n Obs: ${obsVal.toString()}`);\n        } else {\n          polygon = L.polygon(layer.coord, {\n            fillColor: colors(layer.pollutant), weight: 0, opacity: 0, fillOpacity: 0.5,\n          }).bindTooltip(`${map}: ${val.toString()}`);\n        }\n        polygon.addTo(this.mappy);\n        this.polygon_data.push(polygon);\n      });\n    },\n    drawLegend(divID) {\n      const xScale = d3.scaleLinear()\n        .range([0, 180 - (9 * 2)])\n        .domain(this.extent);\n      const xAxis = d3.axisBottom(xScale)\n        .tickSize(8 * 2)\n        .tickValues(this.extent);\n      const svg = d3.select(divID)\n        .append('svg')\n        .attr('width', 180)\n        .attr('height', 35);\n      const g = svg.append('g').attr('transform', 'translate(3, 5)');\n      const defs = svg.append('defs');\n      const linearGradient = defs.append('linearGradient').attr('id', 'myGradient');\n      linearGradient.selectAll('stop')\n        .data(this.colorData)\n        .enter().append('stop')\n        .attr('offset', (d) => d.offset)\n        .attr('stop-color', (d) => d.color);\n      g.append('rect')\n        .attr('width', 180 - (9 * 2))\n        .attr('height', 8)\n        .style('fill', 'url(#myGradient)');\n      g.append('g')\n        .call(xAxis);\n    },\n    clearLayer() {\n      this.polygon_data.forEach((layer) => {\n        this.map1.removeLayer(layer);\n      });\n    },\n    checkCondition(pol, hr, nD, oD, map) {\n      this.changeName(pol, hr);\n      if (oD === nD) {\n        this.drawGrids(this.geodata, hr, map);\n      } else {\n        this.getdata(pol, hr, nD);\n      }\n    },\n    getdata(pol, hr, nD, method) {\n      const path = 'http://127.0.0.1:5000/data';\n      axios.post(path, {\n        Method: method,\n        pollutants: pol,\n        Date: nD,\n        Future_hour: hr,\n      })\n        .then((res) => {\n          if (method === 'CMAQ') {\n            console.log(res.data);\n            this.drawGrids(res.data, hr, this.Method1);\n          } else {\n            this.drawGrids(res.data, hr, this.Method2);\n          }\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    doAnimation(j, pol, nD, oD) {\n      let x = j;\n      setTimeout(() => {\n        if (this.flag === true) {\n          const hour = this.array[x];\n          this.checkCondition(pol, hour, nD, oD);\n          x -= 1;\n          if (x >= 0) {\n            this.index = x;\n            this.doAnimation(x, pol, nD, oD);\n          }\n        }\n      }, 1000);\n    },\n    changeName(pol, hr) {\n      const legName = pol;\n      const fhName = 'Future_hour:';\n      document.getElementById('legend_name').innerHTML = legName.concat('  Concentration');\n      document.getElementById('Future_hour').innerHTML = fhName.concat(hr);\n    },\n    submitFunc(pol, hr, nD, oD, map) {\n      if (this.index === 0) {\n        this.index = 12;\n      } else {\n        this.index = this.array.indexOf(parseInt(hr, 10));\n      }\n      this.checkCondition(pol, hr, nD, oD, map);\n    },\n    playFunc(pol, nD, oD) {\n      this.flag = true;\n      this.doAnimation(this.index, pol, nD, oD);\n    },\n    stopFunc() {\n      this.flag = false;\n    },\n  },\n  mounted() {\n    this.initMap();\n    this.drawLegend('#legend');\n    EventBus.$on('clicked-event', (pollutant, hour, newDate, oldDate) => {\n      if (this.geodata === null) {\n        this.changeName(pollutant, hour);\n        this.getdata(pollutant, hour, newDate, this.Method1);\n      } else {\n        this.submitFunc(pollutant, hour, newDate, oldDate, this.Method1);\n      }\n    });\n    EventBus.$on('play-event', (pollutant, newDate, oldDate) => {\n      this.playFunc(pollutant, newDate, oldDate);\n    });\n    EventBus.$on('stop-event', () => {\n      this.stopFunc();\n    });\n  },\n};\n</script>\n\n<style>\n/* tags */\n/* h4{\n  text-align: left;\n  margin: 10px 0 0 250px;\n  width: 250px;\n} */\n/* class */\n.col-12{\n  height: 50vh;\n}\n.first_map{\n  padding: 0;\n}\n.legend{\n  width: 180px;\n  margin-left: 45px;\n}\n/* ids */\n#heading_1{\n  width: 150px;\n  margin: 25px 0 0 95px;\n}\n#heading_2{\n  width: 250px;\n  margin: 15px 0 0 195px;\n}\n#Future_hour{\n  text-align: left;\n  width: 105px;\n  margin: 20px 0 0 5px;\n}\n#legend_name{\n  text-align: left;\n  margin: 5px 0 0 47px;\n  font-size: 12px;\n  width: 150px;\n}\n#map_1{\n  margin: 10px 0 0 10px;\n  height: 350px;\n  width: 630px;\n}\n#map_2{\n  margin: 50px 0 0 10px;\n  height: 350px;\n  width: 630px;\n}\n</style>\n"]}]}