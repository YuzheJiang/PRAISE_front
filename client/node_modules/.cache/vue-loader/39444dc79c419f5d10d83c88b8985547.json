{"remainingRequest":"/Users/reshika/cs20/Research_Assistant/New_layout/PRAISE_front/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/reshika/cs20/Research_Assistant/New_layout/PRAISE_front/client/src/components/Mapview.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/reshika/cs20/Research_Assistant/New_layout/PRAISE_front/client/src/components/Mapview.vue","mtime":1609383349962},{"path":"/Users/reshika/cs20/Research_Assistant/New_layout/PRAISE_front/client/node_modules/cache-loader/dist/cjs.js","mtime":1594193191162},{"path":"/Users/reshika/cs20/Research_Assistant/New_layout/PRAISE_front/client/node_modules/babel-loader/lib/index.js","mtime":1594193189891},{"path":"/Users/reshika/cs20/Research_Assistant/New_layout/PRAISE_front/client/node_modules/cache-loader/dist/cjs.js","mtime":1594193191162},{"path":"/Users/reshika/cs20/Research_Assistant/New_layout/PRAISE_front/client/node_modules/vue-loader/lib/index.js","mtime":1594193201324}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJzsKaW1wb3J0ICdsZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3MnOwppbXBvcnQgTCBmcm9tICdsZWFmbGV0JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IEV2ZW50QnVzIGZyb20gJ0AvZXZlbnRCdXMnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdNYXBWaWV3JywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29sb3JEYXRhOiBbeyBvZmZzZXQ6ICcwJScsIGNvbG9yOiAnI2ZmZmZmZicgfSwgeyBvZmZzZXQ6ICcxOC4yOCUnLCBjb2xvcjogJyNlZGY4ZmInIH0sCiAgICAgICAgeyBvZmZzZXQ6ICcyOC41NiUnLCBjb2xvcjogJyNjY2VjZTYnIH0sIHsgb2Zmc2V0OiAnNDIuODQlJywgY29sb3I6ICcjOTlkOGM5JyB9LAogICAgICAgIHsgb2Zmc2V0OiAnNTcuMTIlJywgY29sb3I6ICcjNjZjMmE0JyB9LCB7IG9mZnNldDogJzcxLjQlJywgY29sb3I6ICcjMmNhMjVmJyB9LAogICAgICAgIHsgb2Zmc2V0OiAnMTAwJScsIGNvbG9yOiAnIzAwNmQyYycgfV0sCiAgICAgIGV4dGVudDogWzAsIDgwXSwKICAgICAgYXJyYXk6IFsxMiwgMTEsIDEwLCA5LCA4LCA3LCA2LCA1LCA0LCAzLCAyLCAxLCAwXSwKICAgICAgaW5kZXg6IDEyLAogICAgICBvYlN0YXRpb246IG51bGwsCiAgICAgIG1hcDE6IG51bGwsCiAgICAgIG1hcDI6IG51bGwsCiAgICAgIGZsYWc6IGZhbHNlLAogICAgICBwb2x5Z29uX2RhdGFfMTogW10sCiAgICAgIHBvbHlnb25fZGF0YV8yOiBbXSwKICAgICAgZ2VvZGF0YTogbnVsbCwKICAgICAgbWFwZGF0YTogbnVsbCwKICAgICAgb2JzX2RhdGE6IG51bGwsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdE1hcCgpIHsKICAgICAgdGhpcy5tYXAxID0gTC5tYXAoJ21hcF8xJykuc2V0VmlldyhbMjIuMzQzODUsIDExNC4xMjg5XSwgMTApOwogICAgICB0aGlzLm1hcDIgPSBMLm1hcCgnbWFwXzInKS5zZXRWaWV3KFsyMi4zNDM4NSwgMTE0LjEyODldLCAxMCk7CiAgICAgIEwudGlsZUxheWVyKCdodHRwczovL2NhcnRvZGItYmFzZW1hcHMte3N9Lmdsb2JhbC5zc2wuZmFzdGx5Lm5ldC9yYXN0ZXJ0aWxlcy92b3lhZ2VyL3t6fS97eH0ve3l9LnBuZycsCiAgICAgICAgeyBhdHRyaWJ1dGlvbjogJyZjb3B5OyA8YSBocmVmPSJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodCI+T3BlblN0cmVldE1hcDwvYT4sICZjb3B5OyA8YSBocmVmPSJodHRwczovL2NhcnRvLmNvbS9hdHRyaWJ1dGlvbiI+Q0FSVE88L2E+JyB9KS5hZGRUbyh0aGlzLm1hcDEpOwogICAgICBMLnRpbGVMYXllcignaHR0cHM6Ly9jYXJ0b2RiLWJhc2VtYXBzLXtzfS5nbG9iYWwuc3NsLmZhc3RseS5uZXQvcmFzdGVydGlsZXMvdm95YWdlci97en0ve3h9L3t5fS5wbmcnLAogICAgICAgIHsgYXR0cmlidXRpb246ICcmY29weTsgPGEgaHJlZj0iaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHQiPk9wZW5TdHJlZXRNYXA8L2E+LCAmY29weTsgPGEgaHJlZj0iaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb24iPkNBUlRPPC9hPicgfSkuYWRkVG8odGhpcy5tYXAyKTsKICAgIH0sCiAgICBkcmF3R3JpZHMobWFwKSB7CiAgICAgIGNvbnN0IHBhdGggPSAnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2dyaWREYXRhJzsKICAgICAgYXhpb3MuZ2V0KHBhdGgpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgbGV0IHBvbHlnb247CiAgICAgICAgICB0aGlzLmdlb2RhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIHRoaXMuZ2VvZGF0YS5mb3JFYWNoKChsYXllcikgPT4gewogICAgICAgICAgICBwb2x5Z29uID0gTC5wb2x5Z29uKGxheWVyLmNvb3JkLCB7CiAgICAgICAgICAgICAgY29sb3I6ICdsaWdodGdyZXknLAogICAgICAgICAgICAgIG9wYWNpdHk6IDAuMCwKICAgICAgICAgICAgICB4OiBsYXllci54LAogICAgICAgICAgICAgIHk6IGxheWVyLnksCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAobWFwID09PSAnQ01BUScpIHsKICAgICAgICAgICAgICBwb2x5Z29uLmFkZFRvKHRoaXMubWFwMSk7CiAgICAgICAgICAgICAgdGhpcy5wb2x5Z29uX2RhdGFfMS5wdXNoKHBvbHlnb24pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHBvbHlnb24uYWRkVG8odGhpcy5tYXAyKTsKICAgICAgICAgICAgICB0aGlzLnBvbHlnb25fZGF0YV8yLnB1c2gocG9seWdvbik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgb2JzRGF0YShwb2xsdXRhbnQsIG5ld0RhdGUpIHsKICAgICAgY29uc3QgcGF0aCA9ICdodHRwOi8vMTI3LjAuMC4xOjUwMDAvb2JzRGF0YSc7CiAgICAgIGF4aW9zLnBvc3QocGF0aCwgewogICAgICAgIHBvbGx1dGFudHM6IHBvbGx1dGFudCwKICAgICAgICBEYXRlOiBuZXdEYXRlLAogICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMub2JzX2RhdGEgPSByZXMuZGF0YTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldERhdGEocG9sbHV0YW50LCBob3VyLCBuZXdEYXRlKSB7CiAgICAgIHRoaXMub2JzRGF0YShwb2xsdXRhbnQsIG5ld0RhdGUpOwogICAgICBjb25zdCBwYXRoID0gJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9kdW1teURhdGEnOwogICAgICBheGlvcy5wb3N0KHBhdGgsIHsKICAgICAgICBwb2xsdXRhbnRzOiBwb2xsdXRhbnQsCiAgICAgICAgRGF0ZTogbmV3RGF0ZSwKICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICB0aGlzLmNvbG9yTWFwKHJlcy5kYXRhLCBwb2xsdXRhbnQsIGhvdXIpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgY29sb3JNYXAoZGF0YSwgcG9sbHV0YW50LCBob3VyKSB7CiAgICAgIHRoaXMuY2xlYXJDb2xvcigpOwogICAgICB0aGlzLmNoYW5nZU5hbWUocG9sbHV0YW50LCBob3VyKTsKICAgICAgbGV0IHBvbHlnb25EYXRhID0gbnVsbDsKICAgICAgY29uc3QgY29sb3JzID0gZDMuc2NhbGVRdWFudGl6ZSgpCiAgICAgICAgLmRvbWFpbih0aGlzLmV4dGVudCkKICAgICAgICAucmFuZ2UodGhpcy5jb2xvckRhdGEubWFwKChkKSA9PiBkLmNvbG9yKSk7CiAgICAgIGNvbnN0IG1ldGhvZHMgPSBbJ0NNQVEnLCAnT3VyX21ldGhvZCddOwogICAgICB0aGlzLm1hcGRhdGEgPSBkYXRhOwogICAgICBsZXQgbmV3RGF0YSA9IG51bGw7CiAgICAgIG1ldGhvZHMuZm9yRWFjaCgoZWwpID0+IHsKICAgICAgICBsZXQgbSA9IDA7CiAgICAgICAgY29uc3QgbmFtZSA9IGVsOwogICAgICAgIGlmIChuYW1lID09PSAnQ01BUScpIHsKICAgICAgICAgIHBvbHlnb25EYXRhID0gdGhpcy5wb2x5Z29uX2RhdGFfMTsKICAgICAgICAgIG5ld0RhdGEgPSB0aGlzLm1hcGRhdGEuQ01BUVtob3VyXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcG9seWdvbkRhdGEgPSB0aGlzLnBvbHlnb25fZGF0YV8yOwogICAgICAgICAgbmV3RGF0YSA9IHRoaXMubWFwZGF0YS5PdXJfbWV0aG9kW2hvdXJdOwogICAgICAgIH0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQxOyBpICs9IDEpIHsKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgNjQ7IGogKz0gMSkgewogICAgICAgICAgICBjb25zdCBpbmRleCA9IGogKyBtOwogICAgICAgICAgICBjb25zdCB2YWwgPSBuZXdEYXRhW2ldW2pdLnRvRml4ZWQoMik7CiAgICAgICAgICAgIHBvbHlnb25EYXRhW2luZGV4XS5zZXRTdHlsZSh7CiAgICAgICAgICAgICAgZmlsbENvbG9yOiBudWxsLCBjb2xvcjogY29sb3JzKHZhbCksIGZpbGxPcGFjaXR5OiAwLjQsCiAgICAgICAgICAgIH0pLmJpbmRUb29sdGlwKGAke25hbWV9OiAke3ZhbC50b1N0cmluZygpfWApOwogICAgICAgICAgfQogICAgICAgICAgbSArPSA2NDsKICAgICAgICB9CiAgICAgICAgdGhpcy5vYnNfZGF0YVtob3VyXS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAgICAgICBjb25zdCB2YWx1ZSA9IG5ld0RhdGFbZWxlbWVudC55XVtlbGVtZW50LnhdLnRvRml4ZWQoMik7CiAgICAgICAgICBwb2x5Z29uRGF0YS5mb3JFYWNoKChsYXllcikgPT4gewogICAgICAgICAgICBpZiAoZWxlbWVudC54ID09PSBsYXllci5vcHRpb25zLnggJiYgZWxlbWVudC55ID09PSBsYXllci5vcHRpb25zLnkpIHsKICAgICAgICAgICAgICBjb25zdCBlcnJvciA9ICh2YWx1ZSAtIGVsZW1lbnQuUG9sbHV0YW50LnRvRml4ZWQoMikpLnRvRml4ZWQoMik7CiAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuUG9sbHV0YW50LnRvRml4ZWQoMikgPiB2YWx1ZSkgewogICAgICAgICAgICAgICAgbGF5ZXIuc2V0U3R5bGUoewogICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICdyZWQnLCBjb2xvcjogJ3llbGxvdycsIGZpbGxPcGFjaXR5OiAwLjUsCiAgICAgICAgICAgICAgICB9KS5iaW5kVG9vbHRpcChgJHtuYW1lfTogJHt2YWx1ZS50b1N0cmluZygpfSBPQlM6CiAgICAgICAgJHtlbGVtZW50LlBvbGx1dGFudC50b0ZpeGVkKDIpLnRvU3RyaW5nKCl9IDxicj5FcnJvcjogJHtlcnJvcn1gKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbGF5ZXIuc2V0U3R5bGUoewogICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICdyZWQnLCBjb2xvcjogJ2JsdWUnLCBmaWxsT3BhY2l0eTogMC41LAogICAgICAgICAgICAgICAgfSkuYmluZFRvb2x0aXAoYCR7bmFtZX06ICR7dmFsdWUudG9TdHJpbmcoKX0gT0JTOgogICAgICAgICR7ZWxlbWVudC5Qb2xsdXRhbnQudG9GaXhlZCgyKS50b1N0cmluZygpfSA8YnI+RXJyb3I6ICR7ZXJyb3J9YCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZHJhd0xlZ2VuZChkaXZJRCkgewogICAgICBjb25zdCB4U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpCiAgICAgICAgLnJhbmdlKFswLCAxODAgLSAoOSAqIDIpXSkKICAgICAgICAuZG9tYWluKHRoaXMuZXh0ZW50KTsKICAgICAgY29uc3QgeEF4aXMgPSBkMy5heGlzQm90dG9tKHhTY2FsZSkKICAgICAgICAudGlja1NpemUoOCAqIDIpCiAgICAgICAgLnRpY2tWYWx1ZXModGhpcy5leHRlbnQpOwogICAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QoZGl2SUQpCiAgICAgICAgLmFwcGVuZCgnc3ZnJykKICAgICAgICAuYXR0cignd2lkdGgnLCAxODApCiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDM1KTsKICAgICAgY29uc3QgZyA9IHN2Zy5hcHBlbmQoJ2cnKS5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDMsIDUpJyk7CiAgICAgIGNvbnN0IGRlZnMgPSBzdmcuYXBwZW5kKCdkZWZzJyk7CiAgICAgIGNvbnN0IGxpbmVhckdyYWRpZW50ID0gZGVmcy5hcHBlbmQoJ2xpbmVhckdyYWRpZW50JykuYXR0cignaWQnLCAnbXlHcmFkaWVudCcpOwogICAgICBsaW5lYXJHcmFkaWVudC5zZWxlY3RBbGwoJ3N0b3AnKQogICAgICAgIC5kYXRhKHRoaXMuY29sb3JEYXRhKQogICAgICAgIC5lbnRlcigpLmFwcGVuZCgnc3RvcCcpCiAgICAgICAgLmF0dHIoJ29mZnNldCcsIChkKSA9PiBkLm9mZnNldCkKICAgICAgICAuYXR0cignc3RvcC1jb2xvcicsIChkKSA9PiBkLmNvbG9yKTsKICAgICAgZy5hcHBlbmQoJ3JlY3QnKQogICAgICAgIC5hdHRyKCd3aWR0aCcsIDE4MCAtICg5ICogMikpCiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDgpCiAgICAgICAgLnN0eWxlKCdmaWxsJywgJ3VybCgjbXlHcmFkaWVudCknKTsKICAgICAgZy5hcHBlbmQoJ2cnKQogICAgICAgIC5jYWxsKHhBeGlzKTsKICAgIH0sCiAgICBkcmF3TGVnZW5kMihkaXZJRCkgewogICAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QoZGl2SUQpCiAgICAgICAgLmFwcGVuZCgnc3ZnJykKICAgICAgICAuYXR0cignd2lkdGgnLCAxNTApCiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDYwKTsKICAgICAgY29uc3QgbmFtZURhdGEgPSBbeyBuYW1lOiAnT3ZlckVzdF9lcnJvcicsIGNvbG9yOiAneWVsbG93JyB9LAogICAgICAgIHsgbmFtZTogJ1VuZGVyRXN0X2Vycm9yJywgY29sb3I6ICdibHVlJyB9XTsKICAgICAgbmFtZURhdGEuZm9yRWFjaCgobCwgaSkgPT4gewogICAgICAgIGNvbnN0IGcgPSBzdmcuYXBwZW5kKCdnJykuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSg0LCAkeyhpICogMjApICsgNX0pYCk7CiAgICAgICAgZy5hcHBlbmQoJ3JlY3QnKQogICAgICAgICAgLmF0dHIoJ3dpZHRoJywgMTApCiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMTApCiAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBsLmNvbG9yKQogICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMC41KTsKICAgICAgICBnLmFwcGVuZCgndGV4dCcpCiAgICAgICAgICAuYXR0cigneCcsIDEyNSkKICAgICAgICAgIC5hdHRyKCd5JywgMTApCiAgICAgICAgICAuYXR0cigndGV4dC1hbmNob3InLCAnZW5kJykKICAgICAgICAgIC5zdHlsZSgndGV4dC10cmFuc2Zvcm0nLCAnY2FwaXRhbGl6ZScpCiAgICAgICAgICAudGV4dChsLm5hbWUpOwogICAgICB9KTsKICAgIH0sCiAgICBjbGVhckNvbG9yKCkgewogICAgICB0aGlzLnBvbHlnb25fZGF0YV8xLmZvckVhY2goKGVsZW1lbnQpID0+IHsKICAgICAgICBlbGVtZW50LnNldFN0eWxlKHsgZmlsbENvbG9yOiBudWxsIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBjaGVja0NvbmRpdGlvbihwb2wsIG9sUG9sLCBociwgbkQsIG9EKSB7CiAgICAgIHRoaXMuY2hhbmdlTmFtZShwb2wsIGhyKTsKICAgICAgaWYgKG9EID09PSBuRCAmJiBvbFBvbCA9PT0gcG9sKSB7CiAgICAgICAgdGhpcy5jb2xvck1hcCh0aGlzLm1hcGRhdGEsIHBvbCwgaHIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZ2V0RGF0YShwb2wsIGhyLCBuRCk7CiAgICAgIH0KICAgIH0sCiAgICBkb0FuaW1hdGlvbihqLCBwb2wsIG9sUG9sLCBuRCwgb0QpIHsKICAgICAgbGV0IHggPSBqOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBpZiAodGhpcy5mbGFnID09PSB0cnVlKSB7CiAgICAgICAgICBjb25zdCBob3VyID0gdGhpcy5hcnJheVt4XTsKICAgICAgICAgIHRoaXMuY2hlY2tDb25kaXRpb24ocG9sLCBvbFBvbCwgaG91ciwgbkQsIG9EKTsKICAgICAgICAgIHggLT0gMTsKICAgICAgICAgIGlmICh4ID49IDApIHsKICAgICAgICAgICAgdGhpcy5pbmRleCA9IHg7CiAgICAgICAgICAgIHRoaXMuZG9BbmltYXRpb24oeCwgcG9sLCBvbFBvbCwgbkQsIG9EKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIDEwMDApOwogICAgfSwKICAgIGNoYW5nZU5hbWUocG9sLCBocikgewogICAgICBjb25zdCBsZWdOYW1lID0gcG9sOwogICAgICBjb25zdCBmaE5hbWUgPSAnRnV0dXJlX2hvdXI6JzsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZ2VuZF9uYW1lJykuaW5uZXJIVE1MID0gbGVnTmFtZS5jb25jYXQoJyAgQ29uY2VudHJhdGlvbicpOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRnV0dXJlX2hvdXInKS5pbm5lckhUTUwgPSBmaE5hbWUuY29uY2F0KGhyKTsKICAgIH0sCiAgICBzdWJtaXRGdW5jKHBvbCwgb2xQb2wsIGhyLCBuRCwgb0QpIHsKICAgICAgaWYgKHRoaXMuaW5kZXggPT09IDApIHsKICAgICAgICB0aGlzLmluZGV4ID0gMTI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMuYXJyYXkuaW5kZXhPZihwYXJzZUludChociwgMTApKTsKICAgICAgfQogICAgICB0aGlzLmNoZWNrQ29uZGl0aW9uKHBvbCwgb2xQb2wsIGhyLCBuRCwgb0QpOwogICAgfSwKICAgIHBsYXlGdW5jKHBvbCwgb2xQb2wsIG5ELCBvRCkgewogICAgICB0aGlzLmZsYWcgPSB0cnVlOwogICAgICB0aGlzLmRvQW5pbWF0aW9uKHRoaXMuaW5kZXgsIHBvbCwgb2xQb2wsIG5ELCBvRCk7CiAgICB9LAogICAgc3RvcEZ1bmMoKSB7CiAgICAgIHRoaXMuZmxhZyA9IGZhbHNlOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRNYXAoKTsKICAgIHRoaXMuZHJhd0xlZ2VuZCgnI2xlZ2VuZCcpOwogICAgdGhpcy5kcmF3TGVnZW5kMignI2xlZ2VuZF8yJyk7CiAgICB0aGlzLmRyYXdHcmlkcygnQ01BUScpOwogICAgdGhpcy5kcmF3R3JpZHMoJ091cl9NZXRob2QnKTsKICAgIEV2ZW50QnVzLiRvbignY2xpY2tlZC1ldmVudCcsIChwb2xsdXRhbnQsIG9sZFBvbGx1dGFudCwgaG91ciwgbmV3RGF0ZSwgb2xkRGF0ZSkgPT4gewogICAgICBpZiAodGhpcy5tYXBkYXRhID09PSBudWxsKSB7CiAgICAgICAgdGhpcy5nZXREYXRhKHBvbGx1dGFudCwgaG91ciwgbmV3RGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zdWJtaXRGdW5jKHBvbGx1dGFudCwgb2xkUG9sbHV0YW50LCBob3VyLCBuZXdEYXRlLCBvbGREYXRlKTsKICAgICAgfQogICAgfSk7CiAgICBFdmVudEJ1cy4kb24oJ3BsYXktZXZlbnQnLCAocG9sbHV0YW50LCBvbGRQb2xsdXRhbnQsIG5ld0RhdGUsIG9sZERhdGUpID0+IHsKICAgICAgdGhpcy5wbGF5RnVuYyhwb2xsdXRhbnQsIG9sZFBvbGx1dGFudCwgbmV3RGF0ZSwgb2xkRGF0ZSk7CiAgICB9KTsKICAgIEV2ZW50QnVzLiRvbignc3RvcC1ldmVudCcsICgpID0+IHsKICAgICAgdGhpcy5zdG9wRnVuYygpOwogICAgfSk7CiAgfSwKfTsK"},{"version":3,"sources":["Mapview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Mapview.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"row\">\n      <div class=\"col-12\">\n         <div class=\"row\">\n           <div class=\"col-md-3 first_map\">\n            <h6 id=\"Future_hour\">Future hour:</h6>\n          </div>\n          <div class=\"col-md-5 first_map\">\n            <h4 id='heading_1'>CMAQ Result</h4>\n          </div>\n          <div class=\"col-md-4 first_map\">\n            <p id=\"legend_name\"></p>\n            <div class = 'legend' id='legend'></div>\n          </div>\n        </div>\n        <div class='map' id='map_1'></div>\n      </div>\n      <hr>\n      <div class=\"col-12\">\n        <div class=\"row\">\n          <div class=\"col-md-3 second_map\"></div>\n          <div class=\"col-md-5 second_map\">\n            <h4 id='heading_2'>Our_Method Result</h4>\n          </div>\n          <div class=\"col-md-4 second_map\">\n            <p>Error Type</p>\n            <div class = 'legend' id='legend_2'></div>\n          </div>\n        </div>\n        <div class='map' id='map_2'></div>\n      </div>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport axios from 'axios';\nimport EventBus from '@/eventBus';\n\nexport default {\n  name: 'MapView',\n  data() {\n    return {\n      colorData: [{ offset: '0%', color: '#ffffff' }, { offset: '18.28%', color: '#edf8fb' },\n        { offset: '28.56%', color: '#ccece6' }, { offset: '42.84%', color: '#99d8c9' },\n        { offset: '57.12%', color: '#66c2a4' }, { offset: '71.4%', color: '#2ca25f' },\n        { offset: '100%', color: '#006d2c' }],\n      extent: [0, 80],\n      array: [12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0],\n      index: 12,\n      obStation: null,\n      map1: null,\n      map2: null,\n      flag: false,\n      polygon_data_1: [],\n      polygon_data_2: [],\n      geodata: null,\n      mapdata: null,\n      obs_data: null,\n    };\n  },\n  methods: {\n    initMap() {\n      this.map1 = L.map('map_1').setView([22.34385, 114.1289], 10);\n      this.map2 = L.map('map_2').setView([22.34385, 114.1289], 10);\n      L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager/{z}/{x}/{y}.png',\n        { attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attribution\">CARTO</a>' }).addTo(this.map1);\n      L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager/{z}/{x}/{y}.png',\n        { attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attribution\">CARTO</a>' }).addTo(this.map2);\n    },\n    drawGrids(map) {\n      const path = 'http://127.0.0.1:5000/gridData';\n      axios.get(path)\n        .then((res) => {\n          let polygon;\n          this.geodata = res.data;\n          this.geodata.forEach((layer) => {\n            polygon = L.polygon(layer.coord, {\n              color: 'lightgrey',\n              opacity: 0.0,\n              x: layer.x,\n              y: layer.y,\n            });\n            if (map === 'CMAQ') {\n              polygon.addTo(this.map1);\n              this.polygon_data_1.push(polygon);\n            } else {\n              polygon.addTo(this.map2);\n              this.polygon_data_2.push(polygon);\n            }\n          });\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    obsData(pollutant, newDate) {\n      const path = 'http://127.0.0.1:5000/obsData';\n      axios.post(path, {\n        pollutants: pollutant,\n        Date: newDate,\n      })\n        .then((res) => {\n          this.obs_data = res.data;\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    getData(pollutant, hour, newDate) {\n      this.obsData(pollutant, newDate);\n      const path = 'http://127.0.0.1:5000/dummyData';\n      axios.post(path, {\n        pollutants: pollutant,\n        Date: newDate,\n      })\n        .then((res) => {\n          console.log(res.data);\n          this.colorMap(res.data, pollutant, hour);\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    colorMap(data, pollutant, hour) {\n      this.clearColor();\n      this.changeName(pollutant, hour);\n      let polygonData = null;\n      const colors = d3.scaleQuantize()\n        .domain(this.extent)\n        .range(this.colorData.map((d) => d.color));\n      const methods = ['CMAQ', 'Our_method'];\n      this.mapdata = data;\n      let newData = null;\n      methods.forEach((el) => {\n        let m = 0;\n        const name = el;\n        if (name === 'CMAQ') {\n          polygonData = this.polygon_data_1;\n          newData = this.mapdata.CMAQ[hour];\n        } else {\n          polygonData = this.polygon_data_2;\n          newData = this.mapdata.Our_method[hour];\n        }\n        for (let i = 0; i < 41; i += 1) {\n          for (let j = 0; j < 64; j += 1) {\n            const index = j + m;\n            const val = newData[i][j].toFixed(2);\n            polygonData[index].setStyle({\n              fillColor: null, color: colors(val), fillOpacity: 0.4,\n            }).bindTooltip(`${name}: ${val.toString()}`);\n          }\n          m += 64;\n        }\n        this.obs_data[hour].forEach((element) => {\n          const value = newData[element.y][element.x].toFixed(2);\n          polygonData.forEach((layer) => {\n            if (element.x === layer.options.x && element.y === layer.options.y) {\n              const error = (value - element.Pollutant.toFixed(2)).toFixed(2);\n              if (element.Pollutant.toFixed(2) > value) {\n                layer.setStyle({\n                  fillColor: 'red', color: 'yellow', fillOpacity: 0.5,\n                }).bindTooltip(`${name}: ${value.toString()} OBS:\n        ${element.Pollutant.toFixed(2).toString()} <br>Error: ${error}`);\n              } else {\n                layer.setStyle({\n                  fillColor: 'red', color: 'blue', fillOpacity: 0.5,\n                }).bindTooltip(`${name}: ${value.toString()} OBS:\n        ${element.Pollutant.toFixed(2).toString()} <br>Error: ${error}`);\n              }\n            }\n          });\n        });\n      });\n    },\n    drawLegend(divID) {\n      const xScale = d3.scaleLinear()\n        .range([0, 180 - (9 * 2)])\n        .domain(this.extent);\n      const xAxis = d3.axisBottom(xScale)\n        .tickSize(8 * 2)\n        .tickValues(this.extent);\n      const svg = d3.select(divID)\n        .append('svg')\n        .attr('width', 180)\n        .attr('height', 35);\n      const g = svg.append('g').attr('transform', 'translate(3, 5)');\n      const defs = svg.append('defs');\n      const linearGradient = defs.append('linearGradient').attr('id', 'myGradient');\n      linearGradient.selectAll('stop')\n        .data(this.colorData)\n        .enter().append('stop')\n        .attr('offset', (d) => d.offset)\n        .attr('stop-color', (d) => d.color);\n      g.append('rect')\n        .attr('width', 180 - (9 * 2))\n        .attr('height', 8)\n        .style('fill', 'url(#myGradient)');\n      g.append('g')\n        .call(xAxis);\n    },\n    drawLegend2(divID) {\n      const svg = d3.select(divID)\n        .append('svg')\n        .attr('width', 150)\n        .attr('height', 60);\n      const nameData = [{ name: 'OverEst_error', color: 'yellow' },\n        { name: 'UnderEst_error', color: 'blue' }];\n      nameData.forEach((l, i) => {\n        const g = svg.append('g').attr('transform', `translate(4, ${(i * 20) + 5})`);\n        g.append('rect')\n          .attr('width', 10)\n          .attr('height', 10)\n          .style('fill', l.color)\n          .style('opacity', 0.5);\n        g.append('text')\n          .attr('x', 125)\n          .attr('y', 10)\n          .attr('text-anchor', 'end')\n          .style('text-transform', 'capitalize')\n          .text(l.name);\n      });\n    },\n    clearColor() {\n      this.polygon_data_1.forEach((element) => {\n        element.setStyle({ fillColor: null });\n      });\n    },\n    checkCondition(pol, olPol, hr, nD, oD) {\n      this.changeName(pol, hr);\n      if (oD === nD && olPol === pol) {\n        this.colorMap(this.mapdata, pol, hr);\n      } else {\n        this.getData(pol, hr, nD);\n      }\n    },\n    doAnimation(j, pol, olPol, nD, oD) {\n      let x = j;\n      setTimeout(() => {\n        if (this.flag === true) {\n          const hour = this.array[x];\n          this.checkCondition(pol, olPol, hour, nD, oD);\n          x -= 1;\n          if (x >= 0) {\n            this.index = x;\n            this.doAnimation(x, pol, olPol, nD, oD);\n          }\n        }\n      }, 1000);\n    },\n    changeName(pol, hr) {\n      const legName = pol;\n      const fhName = 'Future_hour:';\n      document.getElementById('legend_name').innerHTML = legName.concat('  Concentration');\n      document.getElementById('Future_hour').innerHTML = fhName.concat(hr);\n    },\n    submitFunc(pol, olPol, hr, nD, oD) {\n      if (this.index === 0) {\n        this.index = 12;\n      } else {\n        this.index = this.array.indexOf(parseInt(hr, 10));\n      }\n      this.checkCondition(pol, olPol, hr, nD, oD);\n    },\n    playFunc(pol, olPol, nD, oD) {\n      this.flag = true;\n      this.doAnimation(this.index, pol, olPol, nD, oD);\n    },\n    stopFunc() {\n      this.flag = false;\n    },\n  },\n  mounted() {\n    this.initMap();\n    this.drawLegend('#legend');\n    this.drawLegend2('#legend_2');\n    this.drawGrids('CMAQ');\n    this.drawGrids('Our_Method');\n    EventBus.$on('clicked-event', (pollutant, oldPollutant, hour, newDate, oldDate) => {\n      if (this.mapdata === null) {\n        this.getData(pollutant, hour, newDate);\n      } else {\n        this.submitFunc(pollutant, oldPollutant, hour, newDate, oldDate);\n      }\n    });\n    EventBus.$on('play-event', (pollutant, oldPollutant, newDate, oldDate) => {\n      this.playFunc(pollutant, oldPollutant, newDate, oldDate);\n    });\n    EventBus.$on('stop-event', () => {\n      this.stopFunc();\n    });\n  },\n};\n</script>\n\n<style>\n/* tags */\n/* class */\n.col-12{\n  height: 50vh;\n}\n.first_map,.second_map{\n  padding: 0;\n}\n.legend{\n  width: 180px;\n  height: 30px;\n  margin-left: 45px;\n}\n/* ids */\n#heading_1, #heading_2{\n  width: 250px;\n  margin: 25px 0 0 45px;\n}\n/* #heading_2{\n  width: 250px;\n  margin: 15px 0 0 195px;\n} */\n#Future_hour{\n  text-align: left;\n  width: 105px;\n  margin: 20px 0 0 5px;\n}\n#legend_name{\n  text-align: left;\n  margin: 5px 0 0 47px;\n  font-size: 12px;\n  width: 250px;\n}\n#map_1, #map_2{\n  margin: 10px 0 0 10px;\n  height: 350px;\n  width: 630px;\n}\n/* #map_2{\n  margin: 50px 0 0 10px;\n  height: 350px;\n  width: 630px;\n} */\n</style>\n"]}]}